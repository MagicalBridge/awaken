# 使用 EIP712 进行链下 Permit 和 白名单设计

## 题目1：
- 1.使用`EIP2612`标准（可基于 Openzepplin 库）编写一个自己名称的 Token 合约。
- 2.修改`TokenBank`存款合约, 添加一个函数`permitDeposit`以支持离线签名授权（permit）进行存款。
- 3.修改Token 购买 NFT NTFMarket 合约，添加功能 permitBuy() 实现只有离线授权的白名单地址才可以购买 NFT （用自己的名称发行 NFT，再上架） 。白名单具体实现逻辑为：项目方给白名单地址签名，白名单用户拿到签名信息后，传给 permitBuy() 函数，在permitBuy()中判断时候是经过许可的白名单用户，如果是，才可以进行后续购买，否则 revert 。

要求：
- 1.有 Token 存款及 NFT 购买成功的测试用例
- 2.有测试用例运行日志或截图，能够看到 Token 及 NFT 转移。

请填写你的 Github 项目链接地址。

### 题解思路：

1、今天主要讲了ERC191，我正在梳理这部分的内容, 这个提议，主要确定了，相关的签名标准。把这部分的内容梳理一下。

2、学习ERC712的规范的相关内容

3、学习EIP2612相关的实现。

4、基于openzepplin的库，实现一个Token，首先将这个token部署到测试链上。' 0x3c510705cdbb9c2d8c6A68A44256fb331D1EDB56 '

5、查看一些Token的基本属性。基本属性都没有问题

6、部署TokenBank合约, ' 0xBc1B2EdE79abCD81571724446389FAb29E3d6ACc '

7、部署这两个合约，使用的都是我的同一个地址：' 0x2b754dEF498d4B6ADada538F01727Ddf67D91A7D '

8、接下来开始实现前端代码，我用新搭建的vite项目中去使用这个功能。

9、前端授权之后,在tokenbank 中可以查询到，用户授权的这个erc20 的 数量 是 10000000000000000000 

10、整体交互完毕。



