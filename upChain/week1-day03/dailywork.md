# 用 Solidity 编写 Bank 智能合约

## 题目1
编写一个 Bank 合约，实现功能：

- 可以通过`Metamask`等钱包直接给`Bank`合约地址存款；
- 在`Bank`合约中记录每个地址的存款金额;
- 编写`withdraw()`方法，仅允许管理员可以通过该方法提取全部资金。
- 用数组记录存款金额的前3名用户；

### 作业提交要求

请提交完成项目代码或github仓库地址。

### 题解思路：
1、向合约存款，合约中必须实现 receive() 函数，否则合约中无法接受主币。（这里使用fallback好还是receive好呢，如何权衡）
2、合约中记录每个合约的存款数量，需要一个mapping，映射是从地址映射到余额。这个知识点也很容易想到
3、提款的方法只允许管理员才可以提取资金，说明必须包含权限管理相关的内容。这里用到了modified, 在今后的学习中这个东西会经常的用到。
4、对存入资金的用户进行排序。这部分内容涉及到对于数组这种数据结构的使用，需要重点掌握。
5、基础功能实现之后，实现对存款金额前三名用户的账户显示。这个排名是会随着后续的操作而不断更新的。

### 测试步骤：
1、直接使用remix环境编译部署合约, 使用的EOA地址是：0x5B38Da6a701c568545dCfcB03FcB875f56beddC4

2、部署之后的合约地址是：0x540d7E428D5207B30EE03F2551Cbb5751D3c7569

3、我在部署合约的时候没有向其中存入余额，调用getBalance函数，参数填入，0x5B38Da6a701c568545dCfcB03FcB875f56beddC4 返回的是0

4、owner是个public类型的变量，可以看到，就是0x5B38Da6a701c568545dCfcB03FcB875f56beddC4这个地址。

5、我使用另一个EOA账号给这个合约转账，2个Ether。再次调用getBalance函数，参数填入0xAb8483F64d9C6d1EcF9b849Ae677dD3315835cb2地址，打印出账户余额。此时整个合约的余额就是2个ether。

6、重复5这个步骤，使用另一个EOA账号给这个合约转账，5个Ether。0x4B20993Bc481177ec7E8f571ceCaE8A9e22C02db，这个账户的余额是5，整个合约的余额是7

7、开始操作第三个账户, 重复5这个步骤，使用另一个EOA账号 0x78731D3Ca6b7E34aC0F824c42a7cC18A495cabaB 继续调用 Bank 合约，整个合约的余额就是14个ether。

8、使用非合约拥有者的账户调用取款函数会报错，因为没有权限。

9、目前这个withdraw一次性将钱全部取出来，我应该加一个参数，支持分批次的提款。(这里的进制需要转换)

10、完善排序函数。遍历确实比较消耗性能。




